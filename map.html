
<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0"/>

<title>Zip Decode</title>

<script src="http://d3js.org/d3.v3.min.js"></script>

<style type="text/css">
body {
    margin: 0;
    font-family: Helvetica, Arial, sans-serif; font-size: 12px;
    overflow: hidden;
}
</style>

</head><body>

<div id="map"></div>

<script type="text/javascript">
var width = 1200,
    height = 1000;


var proj = d3.geo.albersUsa()
//    .center([-90, 40])
//    .translate([width / 2, height / 2]);

d3.tsv("zips.tsv", function(error, zips) {
    var svg = d3.select("#map").append("svg")
        .attr("width", width)
        .attr("height", height);
    svg.append("g").attr("id", "zipdots");
    d3.select("#zipdots").selectAll("rect")
        .data(zips)
      .enter().append("rect")
        .attr("x", function(d) { var p = proj([d.lon, d.lat]); return p[0]; })
        .attr("y", function(d) { var p = proj([d.lon, d.lat]); return p[1];  })
        .attr("width", 1).attr("height", 1);

    // console.log(zips);
});
/*

function wbdColor(wbd) {
    if (!wbd.id) {
        return "#888";
    }
    var huc = 0 + wbd.id.substr(0, hucDepth * 2);
    return colorScale(huc);
}

function render(error, countyTopoJson, wbdTopoJson) {
    var wbdGeoJson = topojson.object(wbdTopoJson, wbdTopoJson.objects.WBD_Subwatershed);
    svg.selectAll(".hu")
        .data(wbdGeoJson.geometries)
      .enter().append("path")
        .attr("class", "hu")
        .style("fill", wbdColor)
        .attr("d", d3.geo.path().projection(proj));

    var countyGeoJson = topojson.object(countyTopoJson, countyTopoJson.objects.california_county_shape_file);
    svg.selectAll(".county")
        .data(countyGeoJson.geometries)
      .enter().append("path")
        .attr("class", "county")
        .attr("d", d3.geo.path().projection(proj));
};

function changeHucDepth(delta) {
    hucDepth += delta;
    if (hucDepth < 1) { hucDepth = 1; }
    if (hucDepth > 6) { hucDepth = 6; }
    svg.select("#hucDepth").text(hucDepth);
    svg.selectAll(".hu")
      .transition().duration(1000)
        .style("fill", wbdColor);
}
*/
</script>
</body></html>
